---
title: "R Notebook"
output: html_notebook
---

##Description

This dataset provides a comprehensive overview of various factors affecting student performance in exams. It includes information on study habits, attendance, parental involvement, and other aspects influencing academic success.

## Required Libraries

The ipak function is designed to make installing and loading packages in R easier. It is useful when you want to make sure that all the packages needed for a script or project are automatically installed and loaded. <https://gist.github.com/stevenworthington/3178163>

```{r}
ipak <- function(pkg){
  new.pkg <- pkg[!(pkg %in% installed.packages()[, "Package"])]
  if(length(new.pkg))
    install.packages(new.pkg, dependencies = TRUE)
  sapply(pkg, require, character.only = TRUE)
}

packages <- c("tidyverse")
ipak(packages)
```

## Exploración de datos

### Lectura de los datos

```{r}
data <- read.csv("data/StudentPerformanceFactors.csv", header=TRUE)
```

### Visualizar las 6 primeras instancias del data frame

```{r}
head(data)
```

### Estructura resumida del data frame

```{r}
str(data)
```

El dataset está compuesto por 6,607 filas y 20 columnas, las cuales incluyen atributos de distintos tipos: numéricos, categóricos y booleanos.

A continuación, se describen algunos de estos atributos:

-   **Hours_Studied**: Número de horas de estudio semanales.

-   **Attendance**: Porcentaje de clases a las que ha asistido.

-   **Parental_Involvement**: Nivel de implicación de los padres en la educación del alumno *(Low, Medium, High)*.

-   **Access_to_Resources**: Disponibilidad de recursos educativos *(Low, Medium, High)*.

-   **Extracurricular_Activities**: Participación en actividades extraescolares *(Yes, No)*.

-   **Sleep_Hours**: Número medio de horas de sueño por noche.

-   **Previous_Scores**: Puntuaciones de exámenes anteriores.

-   **Motivation_Level**: Nivel de motivación del estudiante *(Low, Medium, High)*.

-   **Internet_Access**: Disponibilidad de acceso a Internet *(Yes, No)*.

-   **Tutoring_Sessions**: Número de sesiones de tutoría a las que asiste al mes.

-   **Family_Income**: Nivel de ingresos familiares *(Low, Medium, High)*.

-   **Teacher_Quality**: Calidad de los profesores *(Low, Medium, High)*.

-   **School_Type**: Tipo de escuela a la que asistió *(Public, Private)*.

-   **Peer_Influence**: Influencia de los compañeros en el rendimiento académico *(Positive, Neutral, Negative)*.

-   **Physical_Activity**: Número medio de horas de actividad física a la semana.

-   **Learning_Disabilities**: Presencia de dificultades de aprendizaje *(Yes, No)*.

-   **Parental_Education_Level**: Nivel educativo más alto de los padres *(High School, College, Postgraduate)*.

-   **Distance_from_Home**: Distancia de casa a la escuela *(Near, Moderate, Far)*.

-   **Gender**: Género del estudiante *(Male, Female)*.

-   **Exam_Score**: Calificación del examen final.


## Preprocesamiento de los datos

### Functions

Esta función elimina las filas con valores perdidos. En nuestro conjunto de datos, esto es innecesario porque no existen valores perdidos.

```{r}
delete_na <- function(data){
  data[rowSums(is.na(data)) <= 0,]
}
```

Con esta función convertimos las columnas del data frame en factores ordenados y les asignamos valores enteros, de acuerdo con un orden específico de niveles. Esto es util para las variables que tienen una relación de orden o tienen un nivel jerárquico o progresivo, es decir, que pueden compararse en términos de más o menos, mejor o peor, mayor o menor.

```{r}
convert_to_ordered_int <- function(df, column_names, levels_order, ordered=TRUE){
  for (col in column_names){
  df[[col]] <-  as.integer(factor(df[[col]], levels = levels_order, ordered = ordered))
  }
  return(df)
}
```

Explicación:

- "Parental_Involvement","Access_to_Resources","Motivation_Level","Family_Income","Teacher_Quality"Estas variables pueden ordenarse de menor a mayor o viceversa debido a que "High" es mayor que "Medium", y "Medium" es mayor que "Low".

- En "Peer_Influence", Positive > Neutral > Negative en términos de impacto en el rendimiento. Por lo que tambien se pueden ordenar.

- En "Distance_from_Home" ordenamos los valores en términos de nivel de cercanía de la escuela a la casa del estudiante.

- En "Parental_Education_Level" ordenamos los valores en términos de nivel de estudio de los padres. Desde menos estudios (High School) hasta más estudios (Postgraduate)


```{r}
convert_to_factor <- function(df, column_names, levels) {
  for (col in column_names) {
    df[[col]] <- as.integer(factor(df[[col]], levels = levels))
  }
  return(df)
}
```


```{r}
clean_and_filter_data <- function(data) {
  data <- data %>%
    distinct() %>%
    delete_na() %>%
    convert_to_ordered_int(c("Parental_Involvement","Access_to_Resources","Motivation_Level",
                              "Family_Income","Teacher_Quality"),
                           c("Low", "Medium", "High")) %>%
    convert_to_ordered_int("Distance_from_Home", c("Near", "Moderate", "Far")) %>%
    convert_to_ordered_int("Parental_Education_Level", c("High School", "College", "Postgraduate")) %>%
    convert_to_ordered_int("Peer_Influence",c("Negative", "Neutral", "Positive")) %>%
    convert_to_factor("Gender", c("Male","Female")) %>%
    convert_to_factor("School_Type", c("Public","Private")) %>%
    convert_to_factor(c("Extracurricular_Activities","Internet_Access","Learning_Disabilities"), c("No","Yes"))
  return(data)
}
```

```{r}
df_cleaned <- clean_and_filter_data(data)
```

```{r}
df_cleaned
```



















